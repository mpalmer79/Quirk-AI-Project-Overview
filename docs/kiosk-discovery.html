<!doctype html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<base href="/Quirk-AI-Project-Overview/"><title>Kiosk • Discovery</title>
<link rel="stylesheet" href="assets/kiosk-shared.css">
<script src="assets/kiosk-shared.js"></script>
</head><body>
<div class="kx">
  <h2>Discovery</h2><p class="sub">Tell us your monthly target.</p>
  <div class="row">
    <label class="field"><span class="label">Target monthly payment ($)</span>
      <input id="budget" type="number" min="100" step="25"></label>
  </div>
  <div style="display:flex;justify-content:space-between;gap:8px;margin-top:8px">
    <button id="back" class="btn btn--ghost">← Back</button>
    <button id="next" class="btn">Pick a vehicle →</button>
  </div>
</div>
<script>
const {save, load, post, track} = window.kiosk;
const budgetEl = document.getElementById('budget');
const prof = load('guided_profile',{name:'',contact:'',budget:400});
budgetEl.value = prof.budget ?? 400;
window.addEventListener('message', e=>{
  if(e.data?.type==='discovery:init' && typeof e.data.payload?.budget!=='undefined'){
    budgetEl.value = e.data.payload.budget;
  }
});
function persist(){
  const p = load('guided_profile',{name:'',contact:'',budget:400});
  save('guided_profile',{...p, budget:Number(budgetEl.value||p.budget)});
  post('discovery:update',{budget:Number(budgetEl.value||p.budget)});
}
budgetEl.addEventListener('input', persist);
document.getElementById('back').addEventListener('click', ()=> post('discovery:back'));
document.getElementById('next').addEventListener('click', ()=>{
  persist(); track('guided_discovery_next'); post('discovery:done',{budget:Number(budgetEl.value)});
});
</script>
</body></html>
