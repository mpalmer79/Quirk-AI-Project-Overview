<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <base href="/Quirk-AI-Project-Overview/">
  <title>Kiosk • Trade-In</title>
  <link rel="stylesheet" href="assets/kiosk-shared.css">
  <script src="assets/kiosk-shared.js"></script>
  <style>
    /* Make the child page grow with no inner scrollbar */
    html, body { height:auto; overflow:visible !important; }
    .kx { overflow:visible; padding-bottom:24px; }

    /* ====== Layout & centering ====== */
    .kx { max-width: 1100px; margin: 0 auto; }
    .card-title { text-align:center; margin:6px 0 14px; color:#0f766e; font-weight:800; font-size:1.25rem; }

    .fieldset {
      border:1px solid #e5e7eb; border-radius:16px;
      padding:16px; background:#fff; margin:16px auto;
      max-width: 980px;                 /* centered card width */
    }

    .fieldset.narrow { max-width: 820px; } /* for the long-text sections */
    .fieldset.wide   { max-width: 980px; }

    .row { display:grid; gap:12px; }
    .row--2 { grid-template-columns: 1fr; }
    @media (min-width: 860px){
      .row--2 { grid-template-columns: 1fr 1fr; }
    }

    /* Wearable Items row — auto-fit into up to 3 columns when space allows */
    .row--3 {
      display: grid;
      gap: 12px;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      justify-items: stretch;
      align-items: start;
    }
    .row--3 > .field { min-width: 0; } /* allow inputs to shrink nicely */

    /* Compact mileage field: visually ~10ch; JS enforces 8 digits */
    #miles { width: 10ch; }
    .sr-only {
      position:absolute !important; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
    }

    /* Footer CTA aligned to the card and centered on wide screens */
    .cta { display:flex; gap:8px; justify-content:flex-end; }
    @media (min-width: 980px){
      .cta { max-width: 980px; margin: 8px auto 24px; }
    }
  </style>
</head>
<body>
<div class="kx">
  <h2>Trade-In</h2>

  <!-- Vehicle Details -->
  <h3 class="card-title">Vehicle Details</h3>
  <div class="fieldset wide">
    <div class="row row--2">
      <label class="field">
        <span class="label">VIN</span>
        <input id="vin" maxlength="17" placeholder="Enter 17 digit VIN" aria-describedby="vinHint">
        <small id="vinHint" class="sr-only">VIN auto-capitalizes; letters I, O, Q are invalid.</small>
      </label>

      <label class="field">
        <span class="label">Current Mileage</span>
        <input id="miles" type="number" min="0" step="1" inputmode="numeric" placeholder="e.g., 45,000">
      </label>
    </div>

    <div class="row row--2">
      <label class="field">
        <span class="label">Condition</span>
        <select id="cond">
          <option>Average</option>
          <option>Good</option>
          <option>Excellent</option>
          <option>Rough</option>
        </select>
      </label>
      <div class="field" aria-hidden="true"></div>
    </div>

    <div class="row row--2">
      <label class="field">
        <span class="label">Year</span>
        <select id="year"></select>
      </label>

      <label class="field">
        <span class="label">Make</span>
        <input id="make" placeholder="e.g., Chevrolet">
      </label>
    </div>

    <div class="row row--2">
      <label class="field">
        <span class="label">Model</span>
        <input id="model" placeholder="e.g., Equinox">
      </label>

      <label class="field">
        <span class="label">Trim Level (if known)</span>
        <input id="trim" placeholder="e.g., LT, Premier">
      </label>
    </div>

    <div class="row row--2">
      <label class="field">
        <span class="label">Exterior Color</span>
        <input id="extColor" placeholder="">
      </label>

      <label class="field">
        <span class="label">Interior Color</span>
        <input id="intColor" placeholder="">
      </label>
    </div>

    <div class="row row--2">
      <label class="field">
        <span class="label">Number of Keys Included</span>
        <input id="keys" type="number" min="0" max="10" placeholder="">
      </label>

      <label class="field">
        <span class="label">Title Status</span>
        <select id="title">
          <option>Clean / I have Title</option>
          <option>Lien</option>
          <option>Rebuilt</option>
          <option>Salvage</option>
        </select>
      </label>
    </div>

    <div class="row row--2">
      <label class="field">
        <span class="label">Number of Owners (estimate OK)</span>
        <input id="owners" type="number" min="0" max="20" placeholder="">
      </label>

      <label class="field">
        <span class="label">Has the vehicle ever been in an accident?</span>
        <select id="accident">
          <option>No</option>
          <option>Yes</option>
        </select>
      </label>
    </div>

    <label class="field">
      <span class="label">If yes, was it professionally repaired?</span>
      <textarea id="accidentRepair" rows="3" placeholder="Yes / No / Details"></textarea>
    </label>
  </div>

  <!-- Tell us about your Vehicle (centered/narrow) -->
  <h3 class="card-title">Tell us about your Vehicle</h3>
  <div class="fieldset narrow">
    <!-- Row 1: Warnings (left) + Mechanical (right) -->
    <div class="row row--2">
      <label class="field">
        <span class="label">Any warning lights on dashboard?</span>
        <select id="warnings"><option>No</option><option>Yes</option></select>
      </label>

      <label class="field">
        <span class="label">Mechanical issues</span>
        <textarea id="mech" rows="3"></textarea>
      </label>
    </div>

    <!-- Row 2: Cosmetic (left) + Interior (right) -->
    <div class="row row--2">
      <label class="field">
        <span class="label">Cosmetic issues</span>
        <textarea id="cosmetic" rows="3"></textarea>
      </label>

      <label class="field">
        <span class="label">Interior clean and damage-free?</span>
        <textarea id="interior" rows="2"></textarea>
      </label>
    </div>

    <!-- Row 3: Mods (left, centered) + Smells (right) -->
    <div class="row row--2">
      <label class="field">
        <span class="label">Aftermarket parts or modifications?</span>
        <textarea id="mods" rows="2"></textarea>
      </label>

      <label class="field">
        <span class="label">Unusual smells?</span>
        <textarea id="smells" rows="2"></textarea>
      </label>
    </div>

    <!-- Row 4: Routine services (full width) -->
    <label class="field">
      <span class="label">Routine services up to date?</span>
      <textarea id="service" rows="2"></textarea>
    </label>
  </div>

  <!-- Wearable Items Check (3-up, centered) -->
  <h3 class="card-title">Wearable Items Check</h3>
  <div class="fieldset wide">
    <div class="row row--3">
      <label class="field">
        <span class="label">Tire Condition</span>
        <select id="tires">
          <option>New</option>
          <option>Good</option>
          <option>Worn</option>
          <option>Needs Replacement</option>
        </select>
      </label>

      <label class="field">
        <span class="label">Brake Condition</span>
        <select id="brakes">
          <option>New</option>
          <option>Good</option>
          <option>Worn</option>
          <option>Needs Replacement</option>
        </select>
      </label>

      <label class="field">
        <span class="label">Other Wear Items (issues?)</span>
        <textarea id="wear" rows="2"></textarea>
      </label>
    </div>
  </div>

  <div class="cta">
    <button id="next" class="btn">Ownership options →</button>
  </div>
</div>

<script>
/* ---------------- helpers / globals ---------------- */
const { save, load, post, track } = window.kiosk;

const vinEl   = document.getElementById('vin');
const milesEl = document.getElementById('miles');
const condEl  = document.getElementById('co
