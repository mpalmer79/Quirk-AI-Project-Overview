<!doctype html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<base href="/Quirk-AI-Project-Overview/"><title>Kiosk • Trade-In</title>
<link rel="stylesheet" href="assets/kiosk-shared.css">
<script src="assets/kiosk-shared.js"></script>
</head><body>
<div class="kx">
  <h2>Trade-In</h2><p class="sub">Enter your VIN/miles; we’ll pre-value it.</p>
  <div class="row row--2">
    <label class="field"><span class="label">VIN</span><input id="vin" placeholder="17 characters"></label>
    <label class="field"><span class="label">Miles</span><input id="miles" type="number" min="0" step="100"></label>
  </div>
  <label class="field"><span class="label">Condition</span>
    <select id="cond">
      <option>Average</option><option>Good</option><option>Excellent</option><option>Rough</option>
    </select>
  </label>
  <div style="display:flex;justify-content:space-between;gap:8px;margin-top:8px">
    <span class="note" id="rangeNote">Complete fields to estimate range…</span>
    <button id="next" class="btn">Start credit →</button>
  </div>
</div>
<script>
const {save, load, post, track} = window.kiosk;
const vinEl = document.getElementById('vin');
const milesEl = document.getElementById('miles');
const condEl = document.getElementById('cond');
const noteEl = document.getElementById('rangeNote');

function estimate(lowBase=3000, highBase=7000){
  const miles = Number(milesEl.value||0);
  const adj = Math.max(0, (100000 - miles)/100000);
  const low = Math.round(lowBase * (0.7 + adj*0.6));
  const high = Math.round(highBase * (0.7 + adj*0.6));
  return [low, high];
}
function persist(){
  const [low, high] = estimate();
  const payload = { vin: vinEl.value||'', miles: milesEl.value||'', condition: condEl.value, rangeLow: low, rangeHigh: high };
  save('guided_trade', payload);
  post('trade:update', payload);
  noteEl.textContent = `Est. range: $${low.toLocaleString()} – $${high.toLocaleString()}`;
}
[vinEl, milesEl, condEl].forEach(el=> el.addEventListener('input', persist));
document.getElementById('next').addEventListener('click', ()=>{
  persist(); track('guided_trade_next'); post('trade:done', load('guided_trade',{}));
});
</script>
</body></html>
