<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Quirk AI Sales Kiosk</title>

  <!-- Force light UI -->
  <meta name="color-scheme" content="light"/>
  <meta name="theme-color" content="#ffffff"/>

  <base href="/Quirk-AI-Project-Overview/"/>

  <!-- Global styles + Kiosk overrides (Step 2) -->
  <link rel="stylesheet" href="assets/style.css"/>
  <link rel="stylesheet" href="assets/saleskiosk.css?v=1"/>

  <!-- Tailwind + React (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    :focus-visible { outline:2px solid #34d399; outline-offset:2px; }
    /* showroom watermark with soft wash */
    body{
      background:
        linear-gradient(rgba(255,255,255,.88),rgba(255,255,255,.88)),
        url("assets/kiosk.png") center/cover fixed no-repeat !important;
      min-height:100vh;
    }
    /* iOS light controls */
    @supports(-webkit-touch-callout:none){ :root{color-scheme:light} select,input,textarea{-webkit-appearance:none} }
  </style>
</head>

<body class="sales-kiosk kiosk bg-gradient-to-b from-emerald-50 to-slate-50 min-h-screen">
  <div id="root"></div>

  <footer class="footer">
    <small>© 2025 Quirk AI — Sales Kiosk</small>
  </footer>

  <script type="text/babel">
    const { useMemo, useState, useEffect } = React;

    /* ======================= INVENTORY (demo) ======================= */
    const MODEL_MAP = {
      Chevrolet:['Silverado 1500','Equinox','Traverse','Trax','Trailblazer','Malibu','Colorado','Blazer','Tahoe'],
      GMC:['Sierra 1500','Terrain','Acadia','Canyon','Yukon'],
      Buick:['Encore GX','Envision','Envista']
    };
    const COLORS = ['Black','White','Silver','Gray','Blue','Red','Green','Brown'];

    function basePrice(make, model){
      const m = {
        Chevrolet:{'Trax':21990,'Trailblazer':24990,'Malibu':24990,'Equinox':28990,'Blazer':34990,'Traverse':36990,'Colorado':33990,'Silverado 1500':38990,'Tahoe':58990},
        GMC:{'Terrain':30990,'Acadia':36990,'Canyon':35990,'Sierra 1500':41990,'Yukon':64990},
        Buick:{'Envista':23990,'Encore GX':27990,'Envision':33990}
      };
      return (m[make] && m[make][model]) || 29990;
    }
    const vinFor = (p,i)=> p + String(i).padStart(14,'0');

    function generateNew(){
      const inv=[];
      const add=(make,count,pfx)=>{
        const models=MODEL_MAP[make];
        for(let i=0;i<count;i++){
          const model=models[i%models.length];
          const color=COLORS[i%COLORS.length];
          const price=basePrice(make,model)+(i%7)*750;
          inv.push({
            vin:vinFor(pfx,i+1000), stockType:'New', year:2025, make, model,
            trim:(['LS','LT','LTZ','RS','Denali','Preferred','Avenir'])[i%7],
            price, miles:12+(i%9), color
          });
        }
      };
      add('Chevrolet',90,'1GC'); add('GMC',55,'1GT'); add('Buick',25,'1G4');
      return inv;
    }
    function generateUsed(n=30){
      const makes=['Toyota','Honda','Ford','Nissan','Tesla','Subaru','Hyundai','Kia','Volkswagen','Mazda'];
      const models=['Camry','CR-V','F-150','Altima','Model 3','Outback','Tucson','Sportage','Tiguan','CX-5'];
      const inv=[];
      for(let i=0;i<n;i++){
        inv.push({
          vin:vinFor('2UX',i+5000), stockType:'Used',
          year:2019+(i%6), make:makes[i%makes.length], model:models[i%models.length],
          trim:(['Base','S','SE','SEL','Premium'])[i%5],
          price:17000+(i%14)*1200, miles:18000+(i%25)*3100, color:COLORS[(i+2)%COLORS.length]
        });
      }
      return inv;
    }
    const INVENTORY=[...generateNew(),...generateUsed(30)];

    /* ======================= PAYMENTS ======================= */
    const calcPayment=(amt,aprPct,term)=>{
      const r=aprPct/100/12; if(!r) return amt/term;
      return (r*amt)/(1-Math.pow(1+r,-term));
    };

    const STEPS=['Discovery','Vehicle Match','Payments','Trade-In','Credit Start','F&I Options','Review & Handoff'];

    /* ======================= UI bits ======================= */
    const SectionTitle=({title,subtitle})=>(
      <div className="mb-4">
        <h2 className="text-xl sm:text-2xl font-bold text-emerald-800 text-center">{title}</h2>
        {subtitle && <p className="text-center text-slate-600 mt-1">{subtitle}</p>}
      </div>
    );
    const Field=({label,children})=>(
      <label className="block mb-3">
        <span className="block text-sm font-semibold text-slate-700 mb-1">{label}</span>
        {children}
      </label>
    );
    function PrimaryButton(props){
      const cls=(props.className||"")+" px-5 py-3 rounded-2xl bg-gradient-to-r from-emerald-600 to-emerald-700 text-white font-semibold shadow hover:brightness-110 active:brightness-95";
      return <button {...props} className={cls} />;
    }

    /* ======================= PAGES ======================= */
    function Discovery({profile,setProfile,onNext,onBack}){
      return (
        <div className="kiosk-card">
          <SectionTitle title="Tell us what you need" subtitle="A few quick choices so we can tailor the match."/>
          <div className="grid sm:grid-cols-2 gap-4">
            <Field label="Primary use">
              <select className="w-full rounded-xl border p-3" value={profile.useCase} onChange={e=>setProfile({...profile,useCase:e.target.value})}>
                {['Commute','Family','Adventure','Business'].map(x=><option key={x}>{x}</option>)}
              </select>
            </Field>
            <Field label="Preferred body style">
              <select className="w-full rounded-xl border p-3" value={profile.bodyStyle} onChange={e=>setProfile({...profile,bodyStyle:e.target.value})}>
                {['Sedan','SUV','Truck','EV'].map(x=><option key={x}>{x}</option>)}
              </select>
            </Field>
            <Field label="Monthly budget target">
              <input type="number" className="w-full rounded-xl border p-3" value={profile.budget} onChange={e=>setProfile({...profile,budget:Number(e.target.value)})}/>
            </Field>
            <Field label="Timeline">
              <select className="w-full rounded-xl border p-3" value={profile.timeline} onChange={e=>setProfile({...profile,timeline:e.target.value})}>
                {['Today','This week','This month','Just researching'].map(x=><option key={x}>{x}</option>)}
              </select>
            </Field>
          </div>
          <div className="kiosk-actions">
            <button className="px-4 py-2 rounded-xl border bg-white/80" onClick={onBack}>← Back</button>
            <PrimaryButton className="btn-continue" onClick={onNext}>See matches →</PrimaryButton>
          </div>
        </div>
      );
    }

    function VehicleMatch({selectedVin,onSelect,onBack}){
      const picks=INVENTORY.slice(0,9);
      return (
        <div className="kiosk-card">
          <SectionTitle title="Best matches" subtitle="Tap a vehicle to continue."/>
          <div className="grid md:grid-cols-3 gap-4">
            {picks.map(v=>(
              <button key={v.vin} onClick={()=>onSelect(v.vin)}
                className={`group text-left rounded-2xl border border-slate-200 shadow-sm hover:shadow-lg hover:-translate-y-0.5 transition p-3 bg-white/90 ${selectedVin===v.vin?'ring-4 ring-emerald-300':''}`}>
                <div className="h-44 rounded-xl bg-gradient-to-br from-slate-200 to-slate-300 flex items-center justify-center">
                  <div className="text-center text-slate-600">
                    <div className="text-sm font-semibold">{v.make}</div>
                    <div className="text-xs">{v.model}</div>
                  </div>
                </div>
                <div className="mt-2 font-semibold">{v.year} {v.make} {v.model}</div>
                <div className="text-emerald-700 font-extrabold text-lg">${v.price.toLocaleString()}</div>
                <div className="text-xs text-slate-600">{v.color} • {v.trim}</div>
              </button>
            ))}
          </div>
          <div className="kiosk-actions justify-between">
            <button className="px-4 py-2 rounded-xl border bg-white/80" onClick={onBack}>← Back</button>
            <span className="text-sm text-slate-500">Choose a vehicle to continue</span>
          </div>
        </div>
      );
    }

    function Payments({vehicle,desk,setDesk,monthly,amountFinanced,onBack,onNext,budgetTarget}){
      useEffect(()=>{
        if(!budgetTarget) return;
        const over=monthly-Number(budgetTarget);
        if(over>50){ /* could log/flag */ }
      },[monthly,budgetTarget]);
      const price=vehicle?vehicle.price:desk.price;
      return (
        <div className="kiosk-card">
          <SectionTitle title="Build your payment" subtitle="Deterministic calculator; real taxes/fees plug in here."/>
          <div className="grid md:grid-cols-2 gap-6">
            <div className="rounded-xl border p-4 bg-white/90">
              <div className="text-sm text-slate-600 mb-2">Vehicle price</div>
              <div className="text-2xl font-bold">${(price||0).toLocaleString()}</div>
              <div className="grid grid-cols-2 gap-3 mt-4">
                <Field label="Down payment"><input type="number" className="w-full rounded-xl border p-3" value={desk.down} onChange={e=>setDesk({...desk,down:Number(e.target.value)})}/></Field>
                <Field label="Taxes & fees (est.)"><input type="number" className="w-full rounded-xl border p-3" value={desk.taxesFees} onChange={e=>setDesk({...desk,taxesFees:Number(e.target.value)})}/></Field>
                <Field label="APR %"><input type="number" step="0.1" className="w-full rounded-xl border p-3" value={desk.apr} onChange={e=>setDesk({...desk,apr:Number(e.target.value)})}/></Field>
                <Field label="Term (months)">
                  <select className="w-full rounded-xl border p-3" value={desk.term} onChange={e=>setDesk({...desk,term:Number(e.target.value)})}>
                    {[36,48,60,72,84].map(n=><option key={n} value={n}>{n}</option>)}
                  </select>
                </Field>
              </div>
              <details className="mt-2">
                <summary className="text-slate-600 cursor-pointer">Products</summary>
                <div className="grid sm:grid-cols-3 gap-3 mt-2 text-slate-700">
                  <label className="flex items-center gap-2"><input type="checkbox" checked={desk.products.vsc} onChange={e=>setDesk({...desk,products:{...desk.products,vsc:e.target.checked}})}/> VSC ($1,895)</label>
                  <label className="flex items-center gap-2"><input type="checkbox" checked={desk.products.gap} onChange={e=>setDesk({...desk,products:{...desk.products,gap:e.target.checked}})}/> GAP ($795)</label>
                  <label className="flex items-center gap-2"><input type="checkbox" checked={desk.products.maint} onChange={e=>setDesk({...desk,products:{...desk.products,maint:e.target.checked}})}/> Maintenance ($495)</label>
                </div>
              </details>
            </div>
            <div className="rounded-2xl border p-4 bg-emerald-50/80">
              <div className="text-sm text-emerald-700">Estimated monthly</div>
              <div className="text-4xl font-extrabold text-emerald-800">${monthly.toFixed(0)}</div>
              <div className="text-sm text-slate-600 mt-2">Amount financed: ${amountFinanced.toLocaleString()}</div>
              <div className="mt-3 flex flex-wrap gap-2 text-xs text-slate-700">
                <span className="px-2 py-1 rounded-full bg-white border">APR {desk.apr}%</span>
                <span className="px-2 py-1 rounded-full bg-white border">{desk.term} mos</span>
                <span className="px-2 py-1 rounded-full bg-white border">Down ${Number(desk.down).toLocaleString()}</span>
              </div>
              <p className="text-xs text-slate-500 mt-2">Estimates only; subject to lender approval, credit tier, LTV, and program rules.</p>
            </div>
          </div>
          <div className="kiosk-actions">
            <button className="px-4 py-2 rounded-xl border bg-white/80" onClick={onBack}>← Back</button>
            <PrimaryButton className="btn-continue" onClick={onNext}>Add trade →</PrimaryButton>
          </div>
        </div>
      );
    }

    function Trade({trade,setTrade,estimate,onBack,onNext}){
      return (
        <div className="kiosk-card">
          <SectionTitle title="Trade-in pre-valuation" subtitle="Market-based range. Final number after in-person inspection."/>
          <div className="grid md:grid-cols-3 gap-4">
            <Field label="VIN"><input className="w-full rounded-xl border p-3" value={trade.vin} onChange={e=>setTrade({...trade,vin:e.target.value})} placeholder="Scan or type VIN"/></Field>
            <Field label="Mileage"><input className="w-full rounded-xl border p-3" value={trade.miles} onChange={e=>setTrade({...trade,miles:e.target.value})} placeholder="e.g., 45,500"/></Field>
            <Field label="Condition">
              <select className="w-full rounded-xl border p-3" value={trade.condition} onChange={e=>setTrade({...trade,condition:e.target.value})}>
                {['Great','Average','Rough'].map(x=><option key={x}>{x}</option>)}
              </select>
            </Field>
          </div>
          <div className="mt-2 flex gap-2">
            <button className="px-4 py-2 rounded-xl border bg-white/80" onClick={estimate}>Estimate range</button>
            {trade.rangeLow>0 && (
              <div className="px-4 py-2 rounded-xl bg-emerald-50 border border-emerald-200 text-emerald-800">
                Estimated range: ${trade.rangeLow.toLocaleString()} – ${trade.rangeHigh.toLocaleString()}
              </div>
            )}
          </div>
          <div className="kiosk-actions">
            <button className="px-4 py-2 rounded-xl border bg-white/80" onClick={onBack}>← Back</button>
            <PrimaryButton className="btn-continue" onClick={onNext}>Start credit →</PrimaryButton>
          </div>
        </div>
      );
    }

    const CreditStart=({onBack,onNext})=>(
      <div className="kiosk-card">
        <SectionTitle title="Start your credit application" subtitle="Soft pull first. No impact to score until you consent to submit."/>
        <div className="grid md:grid-cols-3 gap-4">
          <Field label="Full name"><input className="w-full rounded-xl border p-3"/></Field>
          <Field label="Email"><input className="w-full rounded-xl border p-3"/></Field>
          <Field label="Mobile"><input className="w-full rounded-xl border p-3"/></Field>
          <Field label="ZIP"><input className="w-full rounded-xl border p-3"/></Field>
          <Field label="Income (monthly)"><input className="w-full rounded-xl border p-3"/></Field>
          <Field label="Consent to soft pull">
            <label className="flex items-center gap-2"><input type="checkbox"/> I agree to a soft inquiry</label>
          </Field>
        </div>
        <div className="kiosk-actions">
          <button className="px-4 py-2 rounded-xl border bg-white/80" onClick={onBack}>← Back</button>
          <PrimaryButton className="btn-continue" onClick={onNext}>Preview protection →</PrimaryButton>
        </div>
      </div>
    );

    function FandI({desk,setDesk,monthly,onBack,onNext}){
      return (
        <div className="kiosk-card">
          <SectionTitle title="Protect your purchase" subtitle="Add options and see the impact instantly."/>
          <div className="grid sm:grid-cols-3 gap-4">
            <label className="rounded-2xl border p-4 flex items-start gap-3 bg-white/90">
              <input type="checkbox" checked={desk.products.vsc} onChange={e=>setDesk({...desk,products:{...desk.products,vsc:e.target.checked}})}/>
              <div><div className="font-semibold">Vehicle Service Contract</div><div className="text-sm text-slate-600">+$1,895</div></div>
            </label>
            <label className="rounded-2xl border p-4 flex items-start gap-3 bg-white/90">
              <input type="checkbox" checked={desk.products.gap} onChange={e=>setDesk({...desk,products:{...desk.products,gap:e.target.checked}})}/>
              <div><div className="font-semibold">GAP</div><div className="text-sm text-slate-600">+$795</div></div>
            </label>
            <label className="rounded-2xl border p-4 flex items-start gap-3 bg-white/90">
              <input type="checkbox" checked={desk.products.maint} onChange={e=>setDesk({...desk,products:{...desk.products,maint:e.target.checked}})}/>
              <div><div className="font-semibold">Maintenance</div><div className="text-sm text-slate-600">+$495</div></div>
            </label>
          </div>
          <div className="mt-3 p-3 rounded-xl bg-emerald-50 border border-emerald-200 text-emerald-800">
            Current estimated payment: <strong>${monthly.toFixed(0)}</strong>
          </div>
          <div className="kiosk-actions">
            <button className="px-4 py-2 rounded-xl border bg-white/80" onClick={onBack}>← Back</button>
            <PrimaryButton className="btn-continue" onClick={onNext}>Review & handoff →</PrimaryButton>
          </div>
        </div>
      );
    }

    function Review({profile,vehicle,desk,trade,monthly,onBack}){
      return (
        <div className="kiosk-card">
          <SectionTitle title="Review & handoff" subtitle="We'll prep your buyer's order and connect you to a manager or F&I."/>
          <div className="grid md:grid-cols-2 gap-4">
            <div className="rounded-2xl border p-4 bg-white/90">
              <div className="font-semibold mb-2">Your picks</div>
              <ul className="text-sm text-slate-700 space-y-1">
                <li><strong>Name:</strong> {profile.name || '—'}</li>
                <li><strong>Contact:</strong> {profile.contact || '—'}</li>
                <li><strong>Use:</strong> {profile.useCase} • <strong>Body style:</strong> {profile.bodyStyle}</li>
                <li><strong>Budget target:</strong> ${profile.budget}/mo</li>
                <li><strong>Vehicle:</strong> {vehicle ? `${vehicle.year} ${vehicle.make} ${vehicle.model}` : '—'}</li>
                <li><strong>Trade range:</strong> {trade.rangeLow ? `${trade.rangeLow.toLocaleString()}–${trade.rangeHigh.toLocaleString()}` : '—'}</li>
              </ul>
            </div>
            <div className="rounded-2xl border p-4 bg-white/90">
              <div className="font-semibold mb-2">Deal preview</div>
              <ul className="text-sm text-slate-700 space-y-1">
                <li><strong>Est. monthly:</strong> ${monthly.toFixed(0)}</li>
                <li><strong>Down:</strong> ${Number(desk.down).toLocaleString()}</li>
                <li><strong>APR/Term:</strong> {desk.apr}% • {desk.term} mos</li>
                <li><strong>Taxes & fees:</strong> ${desk.taxesFees.toLocaleString()}</li>
                <li><strong>Products:</strong> {(desk.products.vsc?'VSC ':'') + (desk.products.gap?'GAP ':'') + (desk.products.maint?'Maint':'') || '—'}</li>
              </ul>
              <p className="text-xs text-slate-500 mt-2">Draft for review; final numbers subject to inspection and lender approval.</p>
            </div>
          </div>
          <div className="mt-4 flex flex-wrap gap-3 justify-between">
            <button className="px-4 py-2 rounded-xl border bg-white/80" onClick={onBack}>← Back</button>
            <div className="flex gap-2">
              <button className="px-4 py-2 rounded-xl border bg-white/90">Raise hand for manager</button>
              <PrimaryButton>Text me this summary</PrimaryButton>
              <button className="px-4 py-2 rounded-2xl bg-emerald-700 text-white font-semibold">I'm ready now</button>
            </div>
          </div>
        </div>
      );
    }

    /* ======================= APP ======================= */
    function App(){
      const [step,setStep]=useState(0);
      const [profile,setProfile]=useState({name:'',contact:'',useCase:'Commute',bodyStyle:'Sedan',budget:400,timeline:'This week'});
      const [selectedVin,setSelectedVin]=useState(null);
      const [desk,setDesk]=useState({price:0,down:2000,apr:6.9,term:72,taxesFees:995,products:{vsc:false,gap:false,maint:false}});
      const [trade,setTrade]=useState({vin:'',miles:'',condition:'Average',rangeLow:0,rangeHigh:0});

      const vehicle=useMemo(()=>INVENTORY.find(v=>v.vin===selectedVin)||null,[selectedVin]);
      const productTotal=useMemo(()=> (desk.products.vsc?1895:0)+(desk.products.gap?795:0)+(desk.products.maint?495:0),[desk.products]);
      const amountFinanced=useMemo(()=>{
        const price=vehicle?vehicle.price:desk.price;
        const tradeMid=(trade.rangeLow+trade.rangeHigh)/2||0;
        return Math.max(price+desk.taxesFees+productTotal-Number(desk.down||0)-tradeMid,0);
      },[vehicle,desk.down,desk.taxesFees,productTotal,trade.rangeLow,trade.rangeHigh]);
      const monthly=useMemo(()=>calcPayment(amountFinanced,desk.apr,desk.term),[amountFinanced,desk.apr,desk.term]);

      function next(){ setStep(s=>Math.min(s+1,STEPS.length-1)); }
      function back(){ setStep(s=>Math.max(s-1,0)); }
      function selectVehicle(vin){
        const v=INVENTORY.find(x=>x.vin===vin);
        if(v){ setSelectedVin(v.vin); setDesk(d=>({...d,price:v.price})); setStep(2); }
      }
      function estimateTradeRange(){
        const base=12000, miles=parseInt(trade.miles||'0',10);
        const adj=Math.max(0,(60000-miles)*0.05);
        const cond=trade.condition==='Great'?1500:(trade.condition==='Rough'?-1500:0);
        const low=Math.max(500,base+adj+cond-1500);
        const high=Math.max(low+500,base+adj+cond+1500);
        setTrade(t=>({...t,rangeLow:Math.round(low),rangeHigh:Math.round(high)}));
      }

      return (
        <div className="relative w-full min-h-screen">
          <div aria-hidden className="pointer-events-none absolute inset-0 overflow-hidden">
            <div className="absolute -top-24 -left-24 h-72 w-72 rounded-full bg-emerald-300/30 blur-3xl"></div>
            <div className="absolute -bottom-24 -right-24 h-72 w-72 rounded-full bg-sky-300/20 blur-3xl"></div>
          </div>

          <div className="max-w-6xl mx-auto px-4 sm:px-8 py-6 sm:py-10 relative">
            <header className="mb-4 sm:mb-6 flex items-center justify-center text-center">
              <h1 className="text-2xl sm:text-3xl font-extrabold tracking-tight text-emerald-900">Quirk AI Sales Kiosk</h1>
            </header>

            <nav aria-label="Progress" className="mb-5 sm:mb-7">
              <ol className="grid grid-cols-4 sm:grid-cols-7 gap-2">
                {STEPS.map((label,i)=>{
                  const active=i<=step;
                  return (
                    <li key={label}>
                      <div className={`w-full flex items-center gap-2 p-1 rounded-full border border-slate-200 ${active?'bg-emerald-600 text-white':'bg-white/70 text-slate-600'}`}>
                        <span className={`inline-flex h-5 w-5 items-center justify-center rounded-full text-xs font-bold ${active?'bg-white/20':'bg-slate-200 text-slate-700'}`}>{i+1}</span>
                        <span className="hidden sm:block text-xs font-semibold truncate pr-1">{label}</span>
                      </div>
                    </li>
                  );
                })}
              </ol>
            </nav>

            <div className="bg-white/90 backdrop-blur rounded-2xl shadow-2xl border border-slate-200 p-4 sm:p-6">
              {step===0 && <Discovery profile={profile} setProfile={setProfile} onNext={()=>setStep(1)} onBack={back}/>}
              {step===1 && <VehicleMatch selectedVin={selectedVin} onSelect={selectVehicle} onBack={back}/>}
              {step===2 && <Payments vehicle={vehicle} desk={desk} setDesk={setDesk} monthly={monthly} amountFinanced={amountFinanced} onBack={back} onNext={()=>setStep(3)} budgetTarget={profile.budget}/>}
              {step===3 && <Trade trade={trade} setTrade={setTrade} estimate={estimateTradeRange} onBack={back} onNext={()=>setStep(4)}/>}
              {step===4 && <CreditStart onBack={back} onNext={()=>setStep(5)}/>}
              {step===5 && <FandI desk={desk} setDesk={setDesk} monthly={monthly} onBack={back} onNext={()=>setStep(6)}/>}
              {step===6 && <Review profile={profile} vehicle={vehicle} desk={desk} trade={trade} monthly={monthly} onBack={back}/>}
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
  </script>
</body>
</html>
